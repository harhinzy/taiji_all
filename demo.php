<?php/** * Created by PhpStorm. * User: yunian * Date: 2016/6/28 * Time: 17:56 *//** * 将xml转为array * @param string $xml * @throws WxPayException */function FromXml($xmlstring){    return json_decode(json_encode((array)simplexml_load_string($xmlstring)), true);}function get_weather(){    ob_start();    header('Content-Type:text/xml; charset=utf8');    $city = '101010100';    $url = "http://wthrcdn.etouch.cn/WeatherApi?citykey=$city";    $url2 = "http://wthrcdn.etouch.cn/weather_mini?citykey=$city";    // 初始化一个 cURL 对象    $curl = curl_init();    // 设置你需要抓取的URL    curl_setopt($curl, CURLOPT_URL, $url);    // 设置header    curl_setopt($curl, CURLOPT_HEADER, 1);    // 设置cURL 参数，要求结果保存到字符串中还是输出到屏幕上。    curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);    curl_setopt($curl, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)");    curl_setopt($curl, CURLOPT_ENCODING, 'gzip');    // 运行cURL，请求网页    $data = curl_exec($curl);    curl_close($curl);    //把gbk格式转为utf-8//   echo  iconv('gbk','utf8',$data);    print_r(FromXml($data));}get_weather();?>